{{> reverse-proxy-base.conf}}

# this config is used for the dashboard
# - allow large file uploads (e.g. import/avatar)
# - allow large file downloads (e.g. export)
# - allow big git pushes and clones for git client
# - allow big uploads for iCloud client

# allow huge uploads
client_max_body_size 1000M;

# allow huge downloads
proxy_connect_timeout 3s;  # Time to establish a connection to the upstream
proxy_send_timeout 1m;    # Time to send the request to the upstream
proxy_read_timeout 2m;    # Time to read the response from the upstream

# generous rate limiting for downloads
limit_rate 10m;             # Limit download speed to 10MB/s per connection
limit_rate_after 100m;      # First 100MB at full speed, then throttle

# don't buffer anything to disk â€“ recommended for large uploads and downloads
proxy_buffering off;
proxy_request_buffering off;

